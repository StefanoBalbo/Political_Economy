preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Candidato", values_to = "Pref")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("STM", "PB", "HRL", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("STM", "PB", "HRL", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Candidato", values_to = "Pref")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("1", "2", "3", "4", "5"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("1", "2", "3", "4", "5"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("1", "2", "3", "4", "5"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
head(preferencias_final)
head(preferencias)
View(preferencias)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
View(tabla)
rm(list=ls())
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("1", "2", "3", "4", "5"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
View(preferencias)
View(tabla)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("STM", "PB", "HRL", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Candidato", values_to = "Pref")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("STM", "PB", "HRL", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
preferencias$STM <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$STM]
preferencias$PB <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$PB]
preferencias$HRL <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$HRL]
preferencias$JM <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$JM]
preferencias$JG <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$JG]
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("HRL", "PB", "STM", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
# Crear un vector de nombres de columna para los ordenamientos
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
# Cambiar los números en el DataFrame de preferencias a nombres de candidatos
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
# Agregar el vector de nombres de columna como nombres de las columnas de preferencias
colnames(preferencias)[2:6] <- ordenamientos
# Crear el DataFrame preferencias_2
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
# Cambiar el tipo de dato de Candidato a factor con los nombres correctos
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
# Reorganizar los datos usando pivot_wider
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
# Mostrar los primeros registros del DataFrame resultante
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
View(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
View(preferencias)
View(preferencias_final)
View(tabla)
View(preferencias)
indice <- 1:48
preferencias_final$n <- indice
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
indice <- 1:48
preferencias$n <- indice
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
write.xlsx(preferencias_final, "preferencias_final.xlsx")
getwd()
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
indice <- 1:48
preferencias$n <- indice
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
webbrowser.open('https://youtu.be/H_vQt_v8Jmw')
system("iexplore.exe https://youtu.be/H_vQt_v8Jmw")
install.packages("rmarkdown")
library(knitr)
rm(list=ls())
library(googlesheets4)
library(tidyverse)
getwd()
setwd("/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/"); getwd()
#gs4_deauth()
#gs4_auth()
datos <- read_sheet('https://docs.google.com/spreadsheets/d/1fXkkvYr6ZeD9N2YGAPV78o78lJX4apR6dBvK6-OTdBE/edit?usp=sharing')
head(datos)
names(datos)
migracion <- datos[, -c(2, 3, 4, 5, 6, 8, 9, 10)]; names(migracion)
migracion <- rename(migracion,  "id" = "Marca temporal",
"voto_gen" = "¿Cuál sería su intención de voto en las elecciones generales?",
"voto_paso" =  "¿A quién votaste en las PASO?")
names(migracion)
migracion$id <- 1:43
head(migracion)
class(migracion)
migracion <- as.data.frame(migracion); class(migracion)
migracion <- migracion %>% select(id, voto_paso, voto_gen)
head(migracion)
#df = datos[,c("voto", "voto_paso")]
#df$id = 1:nrow(datos)
migracion = gather(migracion, escenario, voto, voto_paso:voto_gen, factor_key=TRUE)
head(migracion)
migracion %>%
ggplot(aes(x = escenario, fill = voto)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = escenario,
stratum = voto,
alluvium = id,
fill = voto)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "white", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
migracion %>%
ggplot(aes(x = escenario, fill = voto)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = escenario,
stratum = voto,
alluvium = id,
fill = voto)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"grey", "grey", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
ggsave("migracion_plot.jpeg", last_plot())
