rm(list=ls())
library(googlesheets4)
library(tidyverse)
getwd()
setwd("/Users/IDECOR/Documents/Code/Eco-Pol/"); getwd()
getwd()
setwd("/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/"); getwd()
datos <- read_sheet('https://docs.google.com/spreadsheets/d/1fXkkvYr6ZeD9N2YGAPV78o78lJX4apR6dBvK6-OTdBE/edit?usp=sharing')
gs4_deauth()
gs4_auth()
datos <- read_sheet('https://docs.google.com/spreadsheets/d/1fXkkvYr6ZeD9N2YGAPV78o78lJX4apR6dBvK6-OTdBE/edit?usp=sharing')
head(datos)
names(datos)
migracion <- datos[, -c(2, 3, 4, 5, 6, 8, 9, 10)]
names(migracion)
migracion <- rename(migracion, "Marca temporal" = "id",
"¿Cuál sería su intención de voto en las elecciones generales?" = "voto_gen",
"¿A quién votaste en las PASO?" = "voto_paso")
migracion <- rename(migracion,  "id" = "Marca temporal",
"voto_gen" = "¿Cuál sería su intención de voto en las elecciones generales?",
"voto_paso" =  "¿A quién votaste en las PASO?")
names(migracion)
head(migracion)
migracion$id <- 1:43
migracion$id
head(migracion)
class(migracion)
migracion <- as.data.frame(migracion)
class(migracion)
migracion %>%
ggplot(aes(x = voto_gen, fill = voto_paso)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("white", "red", "blue",
"yellow", "violet", "grey","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes( # adds an arrow to indicate that time is moving from right to left
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "red", "blue",
"white", "orange", "skyblue","purple")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes( # adds an arrow to indicate that time is moving from right to left
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
migracion %>%
ggplot(aes(x = voto_gen, fill = voto_paso)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "orange", "skyblue","red")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes( # adds an arrow to indicate that time is moving from right to left
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "orange", "skyblue","red")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes( # adds an arrow to indicate that time is moving from right to left
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "orange", "skyblue","red")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes( # adds an arrow to indicate that time is moving from right to left
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
head(migracion)
rm(list=ls())
library(googlesheets4)
library(tidyverse)
getwd()
setwd("/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/"); getwd()
#gs4_deauth()
#gs4_auth()
datos <- read_sheet('https://docs.google.com/spreadsheets/d/1fXkkvYr6ZeD9N2YGAPV78o78lJX4apR6dBvK6-OTdBE/edit?usp=sharing')
head(datos)
names(datos)
migracion <- datos[, -c(2, 3, 4, 5, 6, 8, 9, 10)]; names(migracion)
migracion <- rename(migracion,  "id" = "Marca temporal",
"voto_gen" = "¿Cuál sería su intención de voto en las elecciones generales?",
"voto_paso" =  "¿A quién votaste en las PASO?")
names(migracion)
migracion$id <- 1:43
head(migracion)
class(migracion)
migracion <- as.data.frame(migracion); class(migracion)
#df = datos[,c("voto", "voto_paso")]
#df$id = 1:nrow(datos)
migracion = gather(migracion, voto_gen, voto_paso, voto:voto_paso, factor_key=TRUE)
#df = datos[,c("voto", "voto_paso")]
#df$id = 1:nrow(datos)
migracion = gather(migracion, voto_gen, voto_paso, voto_gen:voto_paso, factor_key=TRUE)
migracion %>%
ggplot(aes(x = voto_gen, fill = voto_paso)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "orange", "skyblue","red")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "white", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
rm(list=ls())
library(googlesheets4)
library(tidyverse)
getwd()
setwd("/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/"); getwd()
#gs4_deauth()
#gs4_auth()
datos <- read_sheet('https://docs.google.com/spreadsheets/d/1fXkkvYr6ZeD9N2YGAPV78o78lJX4apR6dBvK6-OTdBE/edit?usp=sharing')
head(datos)
names(datos)
migracion <- datos[, -c(2, 3, 4, 5, 6, 8, 9, 10)]; names(migracion)
migracion <- rename(migracion,  "id" = "Marca temporal",
"voto_gen" = "¿Cuál sería su intención de voto en las elecciones generales?",
"voto_paso" =  "¿A quién votaste en las PASO?")
names(migracion)
migracion$id <- 1:43
head(migracion)
class(migracion)
migracion <- as.data.frame(migracion); class(migracion)
#df = datos[,c("voto", "voto_paso")]
#df$id = 1:nrow(datos)
migracion = gather(migracion, escenario, voto, voto_gen:voto_paso, factor_key=TRUE)
migracion %>%
ggplot(aes(x = voto_gen, fill = voto_paso)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto_gen,
stratum = voto_paso,
alluvium = id,
fill = voto_paso)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "white", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
rm(list=ls())
library(googlesheets4)
library(tidyverse)
getwd()
setwd("/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/"); getwd()
#gs4_deauth()
#gs4_auth()
datos <- read_sheet('https://docs.google.com/spreadsheets/d/1fXkkvYr6ZeD9N2YGAPV78o78lJX4apR6dBvK6-OTdBE/edit?usp=sharing')
head(datos)
names(datos)
migracion <- datos[, -c(2, 3, 4, 5, 6, 8, 9, 10)]; names(migracion)
migracion <- rename(migracion,  "id" = "Marca temporal",
"voto_gen" = "¿Cuál sería su intención de voto en las elecciones generales?",
"voto_paso" =  "¿A quién votaste en las PASO?")
names(migracion)
migracion$id <- 1:43
head(migracion)
class(migracion)
migracion <- as.data.frame(migracion); class(migracion)
#df = datos[,c("voto", "voto_paso")]
#df$id = 1:nrow(datos)
migracion = gather(migracion, escenario, voto, voto_gen:voto_paso, factor_key=TRUE)
head(migracion)
migracion %>%
ggplot(aes(x = voto, fill = voto_paso)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
migracion %>%
ggplot(aes(x = voto, fill = voto)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto,
stratum = voto_paso,
alluvium = id,
fill = voto)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "white", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
library(ggalluvial)
migracion %>%
ggplot(aes(x = voto,
stratum = voto,
alluvium = id,
fill = voto)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "white", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
head(migracion)
migracion %>%
ggplot(aes(x = escenario, fill = voto)) +
geom_bar(stat = "count") +
scale_fill_viridis_d()
library(ggalluvial)
migracion %>%
ggplot(aes(x = escenario,
stratum = voto,
alluvium = id,
fill = voto)) +
geom_stratum(alpha = 0.5) +
geom_flow() +
# scale_fill_viridis_d() +
scale_fill_manual(values=c("yellow", "purple", "blue",
"white", "white", "orange","skyblue")) +
theme_minimal() +
theme(legend.position = "bottom",
axis.title.y = element_text(angle = 0, hjust = 0)) +
geom_segment(aes(
x = 0.75, xend = 2.16,
y = 0, yend = 0),
arrow = arrow(length=unit(0.30,"cm"),
ends="first",
type = "closed"))
