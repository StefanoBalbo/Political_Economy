destfile <- paste0(BCRA.url, "/debser.xls")
download.file(BCRA.url, destfile)
destfile1 <- paste0(LELIQS.url, "/Historial_LELIQ.xlw")
download.file(LELIQS.url, destfile1)
download.file(BCRA.url, destfile)
download.file(LELIQS.url, destfile1)
destfile1 <- paste0(LELIQS.url, "/Historial-Leliq-Excel.asp?dato=1")
download.file(LELIQS.url, destfile1)
destfile1 <- paste0(LELIQS.url, "/Historial-Leliq-Excel.asp")
download.file(LELIQS.url, destfile1)
rm(list=ls())
library(rvest)
bcra <- "https://www.bcra.gob.ar/PublicacionesEstadisticas/Cuadros_estandarizados_series_estadisticas.asp"
tmisc <- bcra %>%
read_html() %>%
html_nodes(xpath = '/table table-BCRA table-bordered table-hover table-responsive') %>%
html_table()
library(tidyverse)
library(rvest)
bcra <- "https://www.bcra.gob.ar/PublicacionesEstadisticas/Cuadros_estandarizados_series_estadisticas.asp"
bcra <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Cuadros_estandarizados_series_estadisticas.asp")
View(bcra)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
LELIQ <- bcra_LELIQ %>% html_elements("table")
View(LELIQ)
tabla <- LELIQ %>%
html_element("table")
View(tabla)
tabla <- LELIQ %>%
html_element("table") %>%
html_table()
View(tabla)
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
LELIQ <- bcra_LELIQ %>% html_elements("table")
tabla <- LELIQ %>%
html_element("table table-BCRA table-bordered table-hover table-responsive") %>%
html_table()
tabla <- bcra_LELIQ %>% html_elements("tbody")
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("tbody"); nodos
nodos <- bcra_LELIQ %>% html_elements("thead", "tbody"); nodos
nodos <- bcra_LELIQ %>% html_elements("tbody"); nodos
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_table()
View(tabla)
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_element("div") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
#html_element("div") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
#html_element("div") %>%
html_element("/td") %>%
html_text2()
tabla
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("tbody"); nodos
tabla <- nodos %>%
html_element("table") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("table") %>%
html_element("tbody") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("table") %>%
html_element("tbody") %>%
#html_element("tr") %>%
#html_element("td") %>%
html_text2()
tabla
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("tbody") %>%
#html_element("tr") %>%
#html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tbody") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tbody") %>%
html_text2()
tabla
bcra_LELI
bcra_LELIQ
nodos
tabla <- nodos %>%
html_element("tbody") %>%
html_element("thead") %>%
html_text2()
tabla
View(nodos)
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tbody <- nodos %>%
html_element("tbody") %>%
html_element("thead") %>%
html_text2()
tbody
tbody <- nodos %>%
html_element("tbody") %>%
html_text2()
tbody
View(nodos)
tbody <- nodos %>%
html_element("tbody") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tbody
tbody <- nodos %>%
html_element("tbody") %>%
html_text2()
tbody
tr <- tbody %>%
html_element("tr") %>%
html_text2()
tr
td <- tbody %>%
html_element("td") %>%
html_text2()
td
td <- tbody %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
td
tbody
td <- tbody %>%
html_element("t\r") %>%
html_element("t\d") %>%
td
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tbody <- nodos %>%
html_element("tbody") %>%
html_table()
tbody
td <- tbody %>%
html_element("t\r") %>%
html_element("t\d") %>%
td
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tbody <- nodos %>%
html_element("tbody") %>%
html_table()
tbody
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
table <- nodos %>%
html_element("thead") %>%
html_element("tbody") %>%
html_table()
table
table <- nodos %>%
html_element("tbody") %>%
html_table()
table
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("tbody") %>%
html_table()
tabla
############################### ECO POL 2023 ##################################
rm(list=ls())
library(installr)
library(dplyr)
library(data.table)
library(tidyverse)
library(rvest)
library(janitor)
library(rio)
library(here)
library(tmap)
library(sf)
library(glue)
library(scales)
library(htmltools)
library(leaflet)
directorio <- "/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/datos_mesas/"
setwd(directorio); getwd()
url <- "https://socialstats.la/archivos/argentina/elecciones/elecciones.csv.7z"
file <- "/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/datos_mesas/elecciones.zip"
download.file(url, file)
unzip(file, exdir = directorio)
directorio <- "/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/datos_mesas/"
setwd(directorio); getwd()
url <- "https://socialstats.la/archivos/argentina/elecciones/elecciones.csv.7z"
file <- "/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/datos_mesas/elecciones.csv.7z"
download.file(url, file)
unzip(file, exdir = directorio)
library(utils)
unzip(file, exdir = directorio)
install.packages("R.utils")
library(R.utils)
############################### ECO POL 2023 ##################################
rm(list=ls())
library(installr)
library(R.utils)
library(dplyr)
library(data.table)
library(tidyverse)
library(rvest)
library(janitor)
library(rio)
library(here)
library(tmap)
library(sf)
library(glue)
library(scales)
library(htmltools)
library(leaflet)
directorio <- "/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/datos_mesas/"
setwd(directorio); getwd()
url <- "https://socialstats.la/archivos/argentina/elecciones/elecciones.csv.7z"
file <- "/Users/IDECOR/Documents/Code/Political_Economy/eco pol 2023/datos_mesas/elecciones.csv.7z"
download.file(url, file)
source("~/Code/Political_Economy/eco pol 2023/datos_mesas/mesas.R", echo=TRUE)
winrar_path <- "C:/Program Files/WinRAR/WinRAR.exe"
command <- paste(shQuote(winrar_path), "x", shQuote(file), shQuote(directorio))
system(command, wait = TRUE)
list.files(directorio)
system(command, wait = TRUE)
############################### ECO POL 2023 ##################################
rm(list=ls())
library(installr)
library(R.utils)
library(dplyr)
library(data.table)
library(tidyverse)
library(rvest)
library(janitor)
library(rio)
library(here)
library(tmap)
library(sf)
library(glue)
library(scales)
library(htmltools)
library(leaflet)
directorio <- "C:\\Users\\IDECOR\\Documents\\Code\\Political_Economy\\eco pol 2023\\datos_mesas"
setwd(directorio); getwd()
url <- "https://socialstats.la/archivos/argentina/elecciones/elecciones.csv.7z"
file <- "C:\\Users\\IDECOR\\Documents\\Code\\Political_Economy\\eco pol 2023\\datos_mesas\\elecciones.csv.7z"
download.file(url, file)
winrar_path <- "C:\\Program Files\\WinRAR\\WinRAR.exe"
command <- paste(shQuote(winrar_path), "x", shQuote(file), shQuote(directorio))
system(command, wait = TRUE)
list.files(directorio)
{
print("Importamos los datos")
datos <- import("votacion.csv", setclass =" data.table", encoding="UTF-8")
provincias <- import("distrito.csv",setclass="data.table",encoding="UTF-8")
cargos <- import("cargo.csv",setclass="data.table",encoding="UTF-8")
tdv <- import("tipovoto.csv",setclass="data.table",encoding="UTF-8")
elecciontipo <- import("eleccion.csv",setclass="data.table",encoding="UTF-8")
agrupaciones <- import("agrupacion.csv",setclass="data.table",encoding="UTF-8")
#seccion<-import("seccion.csv",setclass="data.table",encoding="UTF-8")
#listas <- fread(paste0(directorio, "lista.csv"), sep = ",", dec = ".")
#mesas <-  fread(paste0(directorio, "mesa.csv"), sep = ",", dec = ".")
#circuito <- fread(paste0(directorio, "circuito.csv"), sep = ",", dec = ".")
#seccion_prov <-fread(paste0(directorio, "seccionprovincial.csv"), sep = ",", dec = ".")
}
head(datos)
head(agrupaciones)
cargos
tdv
elecciontipo
table(provincias$nombre); names(provincias)
# Sumamos nombres distritos
names(datos)
names(provincias)
datos_provincias <- left_join(datos, provincias, by = "distrito_id")
names(datos_provincias)
datos_provincias <- datos_provincias[, -c(12, 13)]
datos_provincias <- rename(datos_provincias, distrito_nombre = nombre)
head(datos_provincias); rm(datos); rm(provincias)
# Sumamos nombres cargos
cargos
table(datos_provincias$cargo_id)
datos_provincias$cargo_nombre <- case_when(datos_provincias$cargo_id == 1 ~ "Presidente",
datos_provincias$cargo_id == 2 ~ "Sen_Nac",
datos_provincias$cargo_id == 3 ~ "Dip_Nac",
datos_provincias$cargo_id == 4 ~ "Gobernador",
datos_provincias$cargo_id == 5 ~ "Sen_Prov",
datos_provincias$cargo_id == 6 ~ "Dip_Prov",
datos_provincias$cargo_id == 7 ~ "Intendente",
datos_provincias$cargo_id == 8 ~ "Mercosur_Nac",
datos_provincias$cargo_id == 9 ~ "Mercosur_Prov",
datos_provincias$cargo_id == 10 ~ "Concejales")
table(datos_provincias$cargo_nombre)
head(datos_provincias)
rm(cargos)
# Elección tipo y año
head(elecciontipo)
elecciontipo <- elecciontipo[, -c(2, 7)]; names(elecciontipo)
datos <- left_join(datos_provincias, elecciontipo, by = "eleccion_id")
head(datos)
table(datos$eleccion_tipo)
names(datos); rm(datos_provincias, elecciontipo)
# Tipo de voto
names(datos)
head(tdv)
datos2 <- left_join(datos, tdv, by = "tipovoto_id")
head(datos2); tdv
datos2 <- rename(datos2, tdv = nombre); names(datos2)
datos2 <- datos2[, -c(18)]
head(datos2)
datos <- datos2; rm(datos2, tdv); names(datos)
head(datos)
table(datos$eleccion_tipo)
datos$eleccion_tipo <- ifelse(datos$eleccion_tipo == "GENERAL", "GENERALES", datos$eleccion_tipo); table(datos$eleccion_tipo)
table(datos$tdv)
table(datos$distrito_nombre)
names(agrupaciones)
agrupaciones <- agrupaciones[, -4]
names(datos)
head(agrupaciones)
head(datos)
table(datos$cargo_nombre)
{
print("Filtramos elecciones presidenciales")
datos_presidencial <- datos %>%
filter(cargo_nombre == "Presidente")
}
rm(datos)
head(datos_presidencial)
{
# Unificación nombres y recategorización
agrupaciones$nombre <- gsub("ALIANZA COMPROMISO FEDERAL", "Alianza Compromiso Federal", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("ALIANZA FRENTE DE IZQUIERDA Y DE LOS TRABAJADORES", "Alianza Frente de Izquierda y de los Trabajadores", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("ALIANZA FRENTE AMPLIO PROGRESISTA", "Alianza Frente Amplio Progresista", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("ALIANZA FRENTE PARA LA VICTORIA", "Alianza Frente para la Victoria", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("ALIANZA FRENTE POPULAR", "Alianza Frente Popular", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("ALIANZA UNION PARA EL DESARROLLO SOCIAL - UDESO", "Alianza Unión para el Desarrollo Social", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("COALICION CIVICA - AFIRMACION PARA UNA REPUBLICA IGUALITARIA (ARI)", "COALICION CIVICA ARI", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("COALICIÓN CÍVICA - AFIRMACIÓN PARA UNA REPÚBLICA IGUALITARIA (ARI)", "COALICION CIVICA ARI", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("Coalición Cívica - Afirmación para una República Igualitaria ARI", "COALICION CIVICA ARI", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("COALICION CIVICA - ARI", "COALICION CIVICA ARI", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("FRENTE DE IZQUIERDA Y DE TRABAJADORES - UNIDAD", "Alianza Frente de Izquierda y de los Trabajadores", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("FRENTE DE IZQUIERDA Y DE TRABAJADORES UNIDAD", "Alianza Frente de Izquierda y de los Trabajadores", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("FRENTE PARA LA VICTORIA", "Alianza Frente para la Victoria", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("MOVIMIENTO IZQUIERDA JUVENTUD DIGNIDAD", "MOVIMIENTO IZQUIERDA JUVENTUD Y DIGNIDAD", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("MOVIMIENTO LIBRES DEL SUR", "Movimiento Libres del Sur", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("MOVIMIENTO IZQUIERDA JUVENTUD DIGNIDAD", "MOVIMIENTO IZQUIERDA JUVENTUD Y DIGNIDAD", agrupaciones$nombre, fixed=TRUE)
agrupaciones$nombre <- gsub("MOVIMIENTO IZQUIERDA JUVENTUD DIGNIDAD", "MOVIMIENTO IZQUIERDA JUVENTUD Y DIGNIDAD", agrupaciones$nombre, fixed=TRUE)
}
head(agrupaciones)
head(datos_presidencial)
datos_agrupacion <- left_join(datos_presidencial, agrupaciones, by = c("agrupacion_id", "eleccion_id"))
head(datos_agrupacion)
datos_agrupacion <- rename(datos_agrupacion, agrupacion_nombre = nombre ); names(datos_agrupacion)
rm(agrupaciones)
{
print("Recategorizamos las agrupaciones en 7 coaliciones")
datos_agrupacion$agrupacion_nombre <- ifelse(datos_agrupacion$agrupacion_nombre == "JUNTOS POR EL CAMBIO" | datos_agrupacion$agrupacion_nombre == "ALIANZA CAMBIEMOS" | datos_agrupacion$agrupacion_nombre == "CAMBIEMOS" | datos_agrupacion$agrupacion_nombre == "MOVIMIENTO DE ACCION VECINAL", "Cambiemos/Macrismo",
ifelse(datos_agrupacion$agrupacion_nombre == "Alianza Frente para la Victoria" | datos_agrupacion$agrupacion_nombre == "ALIANZA FRENTE PARA LA VICTORIA" | datos_agrupacion$agrupacion_nombre == "FRENTE DE TODOS" | datos_agrupacion$agrupacion_nombre == "FRENTE PARA LA VICTORIA" | datos_agrupacion$agrupacion_nombre == "UNION POR LA PATRIA", "Kirchnerismo",
ifelse(datos_agrupacion$agrupacion_nombre == "FRENTE LIBER.AR" | datos_agrupacion$agrupacion_nombre == "LA LIBERTAD AVANZA" | datos_agrupacion$agrupacion_nombre == "UNION DEL CENTRO DEMOCRATICO" | datos_agrupacion$agrupacion_nombre == "UNITE POR LA LIBERTAD Y LA DIGNIDAD", "Liberalismo",
ifelse(datos_agrupacion$agrupacion_nombre == "Alianza Compromiso Federal" | datos_agrupacion$agrupacion_nombre == "ALIANZA COMPROMISO FEDERAL" | datos_agrupacion$agrupacion_nombre == "Alianza Frente Popular" | datos_agrupacion$agrupacion_nombre == "ALIANZA FRENTE POPULAR" | datos_agrupacion$agrupacion_nombre == "ALIANZA UNIDOS POR UNA NUEVA ALTERNATIVA (UNA)" | datos_agrupacion$agrupacion_nombre == "Frente Entrerriano Federal" | datos_agrupacion$agrupacion_nombre == "HACEMOS POR NUESTRO PAIS" | datos_agrupacion$agrupacion_nombre == "PRINCIPIOS Y VALORES" | datos_agrupacion$agrupacion_nombre == "CONSENSO FEDERAL" | datos_agrupacion$agrupacion_nombre == "PARTIDO MOVIMIENTO DE ACCION  VECINAL", "Peronismo Federal/Tercera Via",
ifelse(datos_agrupacion$agrupacion_nombre == "Alianza Frente Amplio Progresista" | datos_agrupacion$agrupacion_nombre == "ALIANZA FRENTE AMPLIO PROGRESISTA" | datos_agrupacion$agrupacion_nombre == "ALIANZA PROGRESISTAS" | datos_agrupacion$agrupacion_nombre == "ALIANZA PROYECTO SUR" | datos_agrupacion$agrupacion_nombre == "Alianza Unión Para el Desarrollo Social" | datos_agrupacion$agrupacion_nombre == "ALIANZA UNION PARA EL DESARROLLO SOCIAL - UDESO" | datos_agrupacion$agrupacion_nombre == "COALICION CIVICA - AFIRMACION PARA UNA REPUBLICA IGUALITARIA (ARI)" | datos_agrupacion$agrupacion_nombre == "Coalición Cívica - Afirmación para una República Igualitaria ARI" | datos_agrupacion$agrupacion_nombre == "COALICION CIVICA - ARI" | datos_agrupacion$agrupacion_nombre == "COALICION CIVICA ARI" | datos_agrupacion$agrupacion_nombre == "Movimiento Libres del Sur" | datos_agrupacion$agrupacion_nombre == "MOVIMIENTO LIBRES DEL SUR" | datos_agrupacion$agrupacion_nombre == "PARTIDO SOCIAL DE CENTRO" | datos_agrupacion$agrupacion_nombre == "Alianza Unión para el Desarrollo Social" | datos_agrupacion$agrupacion_nombre == "COALICIÓN CÍVICA - AFIRMACIÓN PARA UNA REPÚBLICA IGUALITARIA (ARI)", "Progresismo/Socialdemocracia",
ifelse(datos_agrupacion$agrupacion_nombre == "Alianza Frente de Izquierda y de los Trabajadores" | datos_agrupacion$agrupacion_nombre == "ALIANZA FRENTE DE IZQUIERDA Y DE LOS TRABAJADORES" | datos_agrupacion$agrupacion_nombre == "FRENTE DE IZQUIERDA Y DE TRABAJADORES - UNIDAD" | datos_agrupacion$agrupacion_nombre == "FRENTE DE IZQUIERDA Y DE TRABAJADORES UNIDAD" | datos_agrupacion$agrupacion_nombre == "MOVIMIENTO AL SOCIALISMO" | datos_agrupacion$agrupacion_nombre == "MST - NUEVA IZQUIERDA" | datos_agrupacion$agrupacion_nombre == "POLITICA OBRERA" | datos_agrupacion$agrupacion_nombre ==  "PROYECTO JOVEN", "Izquierda", "Conservadurismo/Nacionalismo"))))))
# In Else: "DEL CAMPO POPULAR", "FRENTE NOS", "FRENTE PATRIOTA","FRENTE PATRIOTA FEDERAL","MOVIMIENTO IZQUIERDA JUVENTUD DIGNIDAD","PARTIDO AUTONOMISTA","PARTIDO POPULAR","MOVIMIENTO IZQUIERDA JUVENTUD Y DIGNIDAD" <- "Conservadurismo/Nacionalismo"
}
table(datos_agrupacion$agrupacion_nombre)
head(datos_agrupacion)
datos_presidencial <- datos_agrupacion; rm(datos_agrupacion)
head(datos_presidencial)
table(datos_presidencial$eleccion_tipo)
table(datos_presidencial$anio)
table(datos_presidencial$agrupacion_nombre)
################################
{
print("ELECCIONES 2023")
PASO2023 <- datos_presidencial %>%
filter(eleccion_tipo == "PASO") %>%
filter(anio == "2023")
GEN2023 <- datos_presidencial %>%
filter(eleccion_tipo == "GENERALES") %>%
filter(anio == "2023")
BALL2023 <- datos_presidencial %>%
filter(eleccion_tipo == "BALLOTAGE") %>%
filter(anio == "2023")
}
rm(datos_presidencial)
##################### POR PROVINCIAS
provs <- st_read("~/Code/Political_Economy/eco pol 2023/datos_mesas/IGN/provincia.shp"); names(provs)
provincias <- import("distrito.csv", setclass = "data.table", encoding = "UTF-8"); names(provs)
table(provs$nam)
table(provincias$nombre)
provs$nam <- case_when(as.character(provs$nam)== "Tierra del Fuego, Antártida e Islas del Atlántico Sur" ~ "Tierra del Fuego",
as.character(provs$nam) == "Ciudad Autónoma de Buenos Aires" ~ "Ciudad Autónoma Bs.As.",
TRUE ~ provs$nam
)
provs <- rename(provs, nombre = nam); names(provs)
names(provincias)
capa_provincial <- left_join(provs, provincias, by = "nombre")
names(capa_provincial); rm(provincias, provs)
head(capa_provincial)
head(GEN2023)
head(PASO2023)
table(capa_provincial$nombre)
table(GEN2023$distrito_nombre)
table(PASO2023$distrito_nombre)
capa_provincial <- rename(capa_provincial, distrito_nombre = nombre); names(capa_provincial)
names(GEN2023)
names(PASO2023)
head(capa_provincial)
capa_provincial <- capa_provincial[, -c(1, 2, 3, 4, 6, 7 ,8 , 9, 10, 11)]; head(capa_provincial)
rm(BALL2023)
st_write(capa_provincial, "provincias.gpkg")
setDT(GEN2023)
setDT(PASO2023)
class(GEN2023, PASO2023)
class(GEN2023)
fwrite(GEN2023, "GEN2023.csv")
fwrite(PASO2023, "PASO2023.csv")
# Left_join geometrías y elecciones # Mapas
map_data_GEN <- capa_provincial[GEN2023, on = .(distrito_nombre)]
map_data_PASO <- capa_provincial[PASO2023, on = .(distrito_nombre)]
names(GEN2023)
names(PASO2023)
names(capa_provincial)
map_data_GEN <- capa_provincial[GEN2023, on = .(distrito_nombre), nomatch = 0]
map_data_PASO <- capa_provincial[PASO2023, on = .(distrito_nombre), nomatch = 0]
install.packages("ecoreg", "eco", "ei")
library(installr)
library(R.utils)
library(dplyr)
library(data.table)
library(tidyverse)
library(rvest)
library(janitor)
library(rio)
library(here)
library(tmap)
library(sf)
library(glue)
library(scales)
library(htmltools)
library(leaflet)
library(ecoreg)
library(eco)
library(ei)
GEN2023 <- import("GEN2023.csv", setclass =" data.table", encoding="UTF-8")
PASO2023 <- import("PASO2023.csv", setclass =" data.table", encoding="UTF-8")
