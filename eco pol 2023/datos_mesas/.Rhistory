html_element("table table-BCRA table-bordered table-hover table-responsive") %>%
html_table()
tabla <- bcra_LELIQ %>% html_elements("tbody")
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("tbody"); nodos
nodos <- bcra_LELIQ %>% html_elements("thead", "tbody"); nodos
nodos <- bcra_LELIQ %>% html_elements("tbody"); nodos
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_table()
View(tabla)
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_element("div") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
#html_element("div") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tr") %>%
html_element("td") %>%
#html_element("div") %>%
html_element("/td") %>%
html_text2()
tabla
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("tbody"); nodos
tabla <- nodos %>%
html_element("table") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("table") %>%
html_element("tbody") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("table") %>%
html_element("tbody") %>%
#html_element("tr") %>%
#html_element("td") %>%
html_text2()
tabla
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("tbody") %>%
#html_element("tr") %>%
#html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tbody") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tabla
tabla <- nodos %>%
html_element("tbody") %>%
html_text2()
tabla
bcra_LELI
bcra_LELIQ
nodos
tabla <- nodos %>%
html_element("tbody") %>%
html_element("thead") %>%
html_text2()
tabla
View(nodos)
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tbody <- nodos %>%
html_element("tbody") %>%
html_element("thead") %>%
html_text2()
tbody
tbody <- nodos %>%
html_element("tbody") %>%
html_text2()
tbody
View(nodos)
tbody <- nodos %>%
html_element("tbody") %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
tbody
tbody <- nodos %>%
html_element("tbody") %>%
html_text2()
tbody
tr <- tbody %>%
html_element("tr") %>%
html_text2()
tr
td <- tbody %>%
html_element("td") %>%
html_text2()
td
td <- tbody %>%
html_element("tr") %>%
html_element("td") %>%
html_text2()
td
tbody
td <- tbody %>%
html_element("t\r") %>%
html_element("t\d") %>%
td
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tbody <- nodos %>%
html_element("tbody") %>%
html_table()
tbody
td <- tbody %>%
html_element("t\r") %>%
html_element("t\d") %>%
td
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tbody <- nodos %>%
html_element("tbody") %>%
html_table()
tbody
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
table <- nodos %>%
html_element("thead") %>%
html_element("tbody") %>%
html_table()
table
table <- nodos %>%
html_element("tbody") %>%
html_table()
table
rm(list=ls())
library(tidyverse)
library(rvest)
bcra_LELIQ <- read_html("https://www.bcra.gob.ar/PublicacionesEstadisticas/Historial-Leliq.asp")
nodos <- bcra_LELIQ %>% html_elements("table"); nodos
tabla <- nodos %>%
html_element("tbody") %>%
html_table()
tabla
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
rm(list=ls())
library(installr)
library(R.utils)
library(dplyr)
library(data.table)
library(tidyverse)
library(rvest)
library(janitor)
library(rio)
library(here)
library(tmap)
library(sf)
library(glue)
library(scales)
library(htmltools)
library(leaflet)
library(stringr)
library(reshape)
gc()
directorio <- "C:\\Users\\IDECOR\\Documents\\Code\\Political_Economy\\eco pol 2023\\datos_mesas"
#directorio <- "C:\\Users\\stefa\\Documents\\Code\\Political_Economy\\eco pol 2023\\datos_mesas"
setwd(directorio); getwd()
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre) %>%
summarise(votos = sum(votos))
votos
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
totales = GEN2023 %>%
group_by(seccion_id) %>%
summarise(totales = sum(votos))
totales
#votos = left_join(votos, totales)
#votos
#votos$prop = (votos$votos / votos$totales)
votos$prop = (votos$votos / total_votos) * 100
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("seccion_id", "distrito_nombre", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, seccion_id + distrito_nombre + anio ~ agrupacion_nombre,
value.var = "value")
head(votos_cast)
class(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Kirchnerismo)
sum(votos_cast$Liberalismo)
sum(votos_cast$Peronismo_Federal_Tercera_Via)
sum(votos_cast$Izquierda)
sum(votos_cast$Conservadurismo_Nacionalismo)
sum(votos_cast$Cambiemos_Macrismo) +
sum(votos_cast$Kirchnerismo) +
sum(votos_cast$Liberalismo) +
sum(votos_cast$Peronismo_Federal_Tercera_Via) +
sum(votos_cast$Izquierda) +
sum(votos_cast$Conservadurismo_Nacionalismo)
fwrite(votos_cast, "Generales2023.csv")
rm(list=ls())
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
totales = GEN2023 %>%
group_by(seccion_id) %>%
summarise(totales = sum(votos))
totales
votos = left_join(votos, totales)
votos
votos$prop = (votos$votos / votos$totales)
#votos$prop = (votos$votos / total_votos) * 100
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("seccion_id", "distrito_nombre", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, seccion_id + distrito_nombre + anio ~ agrupacion_nombre,
value.var = "value")
head(votos_cast)
class(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Kirchnerismo)
sum(votos_cast$Liberalismo)
sum(votos_cast$Peronismo_Federal_Tercera_Via)
sum(votos_cast$Izquierda)
sum(votos_cast$Conservadurismo_Nacionalismo)
sum(votos_cast$Cambiemos_Macrismo) +
sum(votos_cast$Kirchnerismo) +
sum(votos_cast$Liberalismo) +
sum(votos_cast$Peronismo_Federal_Tercera_Via) +
sum(votos_cast$Izquierda) +
sum(votos_cast$Conservadurismo_Nacionalismo)
fwrite(votos_cast, "Generales2023.csv")
rm(list=ls())
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
totales = GEN2023 %>%
group_by(seccion_id) %>%
summarise(totales = sum(votos))
totales
votos = left_join(votos, totales)
votos
votos$prop = (votos$votos / votos$totales) * 100
#votos$prop = (votos$votos / total_votos) * 100
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("seccion_id", "distrito_nombre", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, seccion_id + distrito_nombre + anio ~ agrupacion_nombre,
value.var = "value")
head(votos_cast)
class(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Kirchnerismo)
sum(votos_cast$Liberalismo)
sum(votos_cast$Peronismo_Federal_Tercera_Via)
sum(votos_cast$Izquierda)
sum(votos_cast$Conservadurismo_Nacionalismo)
View(votos_cast)
rm(list=ls())
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
#votos = left_join(votos, totales)
#votos
#votos$prop = (votos$votos / votos$totales) * 100
votos$prop = (votos$votos / total_votos) * 100
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("seccion_id", "distrito_nombre", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, seccion_id + distrito_nombre + anio ~ agrupacion_nombre,
value.var = "value")
head(votos_cast)
View(votos_cast)
rm(list=ls())
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
#votos = left_join(votos, totales)
#votos
#votos$prop = (votos$votos / votos$totales) * 100
votos$prop = votos$votos / total_votos
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("seccion_id", "distrito_nombre", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, seccion_id + distrito_nombre + anio ~ agrupacion_nombre,
value.var = "value")
votos_cast
head(votos_cast)
class(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Kirchnerismo)
sum(votos_cast$Liberalismo)
sum(votos_cast$Peronismo_Federal_Tercera_Via)
sum(votos_cast$Izquierda)
sum(votos_cast$Conservadurismo_Nacionalismo)
sum(votos_cast$Cambiemos_Macrismo) +
sum(votos_cast$Kirchnerismo) +
sum(votos_cast$Liberalismo) +
sum(votos_cast$Peronismo_Federal_Tercera_Via) +
sum(votos_cast$Izquierda) +
sum(votos_cast$Conservadurismo_Nacionalismo)
fwrite(votos_cast, "Generales2023.csv")
rm(list=ls())
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
#votos = left_join(votos, totales)
#votos
#votos$prop = (votos$votos / votos$totales) * 100
votos$prop = votos$votos / total_votos
votos
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("seccion_id", "distrito_nombre", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, seccion_id + distrito_nombre + anio ~ agrupacion_nombre,
value.var = "value")
rm(list=ls())
GEN2023 <- fread("GEN2023.csv"); head(GEN2023)
total_votos <- as.numeric(sum(GEN2023$votos))
votos = GEN2023 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
totales = GEN2023 %>%
group_by(seccion_id) %>%
summarise(totales = sum(votos))
totales
#votos = left_join(votos, totales)
#votos
#votos$prop = (votos$votos / votos$totales) * 100
votos$prop = votos$votos / total_votos
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("distrito_id", "distrito_nombre", "seccion_id", "circuito_id", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, distrito_id + distrito_nombre + seccion_id + circuito_id + anio ~ agrupacion_nombre,
value.var = "value")
head(votos_cast)
class(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Kirchnerismo)
sum(votos_cast$Liberalismo)
sum(votos_cast$Peronismo_Federal_Tercera_Via)
sum(votos_cast$Izquierda)
sum(votos_cast$Conservadurismo_Nacionalismo)
sum(votos_cast$Cambiemos_Macrismo) +
sum(votos_cast$Kirchnerismo) +
sum(votos_cast$Liberalismo) +
sum(votos_cast$Peronismo_Federal_Tercera_Via) +
sum(votos_cast$Izquierda) +
sum(votos_cast$Conservadurismo_Nacionalismo)
rm(votos_melt, votos, totales, GEN2023)
fwrite(votos_cast, "Generales2023.csv")
rm(list=ls())
GEN2019 <- fread("GEN2019.csv"); head(GEN2019)
total_votos <- as.numeric(sum(GEN2019$votos))
votos = GEN2019 %>%
group_by(distrito_id, distrito_nombre, seccion_id, circuito_id, agrupacion_nombre, anio) %>%
summarise(votos = sum(votos))
votos
totales = GEN2019 %>%
group_by(seccion_id) %>%
summarise(totales = sum(votos))
totales
#votos = left_join(votos, totales)
#votos
#votos$prop = (votos$votos / votos$totales) * 100
votos$prop = votos$votos / total_votos
votos
votos <- as.data.frame(votos); class(votos)
votos$agrupacion_nombre = gsub("/", "_", votos$agrupacion_nombre)
votos$agrupacion_nombre = gsub(" ", "_", votos$agrupacion_nombre)
head(votos)
tail(votos)
votos_melt <- melt(votos, id.vars = c("distrito_id", "distrito_nombre", "seccion_id", "circuito_id", "anio", "agrupacion_nombre"),
measure.vars = "prop")
votos_melt[is.na(votos_melt)] <- 0
votos_cast <- reshape2::dcast(votos_melt, distrito_id + distrito_nombre + seccion_id + circuito_id + anio ~ agrupacion_nombre,
value.var = "value")
head(votos_cast)
class(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Cambiemos_Macrismo)
sum(votos_cast$Kirchnerismo)
sum(votos_cast$Liberalismo)
sum(votos_cast$Peronismo_Federal_Tercera_Via)
sum(votos_cast$Izquierda)
sum(votos_cast$Conservadurismo_Nacionalismo)
sum(votos_cast$Cambiemos_Macrismo) +
sum(votos_cast$Kirchnerismo) +
sum(votos_cast$Liberalismo) +
sum(votos_cast$Peronismo_Federal_Tercera_Via) +
sum(votos_cast$Izquierda) +
sum(votos_cast$Conservadurismo_Nacionalismo)
rm(votos_melt, votos, totales, GEN2019)
fwrite(votos_cast, "Generales2019.csv")
rm(list=ls())
