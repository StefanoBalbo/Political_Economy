JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("1", "2", "3", "4", "5"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
head(preferencias_final)
head(preferencias)
View(preferencias)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
View(tabla)
rm(list=ls())
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("1", "2", "3", "4", "5"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
View(preferencias)
View(tabla)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("STM", "PB", "HRL", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
library(tidyr)
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Candidato", values_to = "Pref")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("STM", "PB", "HRL", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
preferencias$STM <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$STM]
preferencias$PB <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$PB]
preferencias$HRL <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$HRL]
preferencias$JM <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$JM]
preferencias$JG <- c("HRL", "PB", "STM", "JM", "JG")[preferencias$JG]
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Pref", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = c("HRL", "PB", "STM", "JM", "JG"))
preferencias_final <- pivot_wider(preferencias_2, names_from = "Pref", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
preferencias_2 <- pivot_longer(preferencias, cols = STM:JG, names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
# Crear un vector de nombres de columna para los ordenamientos
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
# Cambiar los números en el DataFrame de preferencias a nombres de candidatos
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
# Agregar el vector de nombres de columna como nombres de las columnas de preferencias
colnames(preferencias)[2:6] <- ordenamientos
# Crear el DataFrame preferencias_2
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
# Cambiar el tipo de dato de Candidato a factor con los nombres correctos
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
# Reorganizar los datos usando pivot_wider
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
# Mostrar los primeros registros del DataFrame resultante
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
View(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
View(preferencias)
View(preferencias_final)
View(tabla)
View(preferencias)
indice <- 1:48
preferencias_final$n <- indice
head(preferencias_final)
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
indice <- 1:48
preferencias$n <- indice
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
write.xlsx(preferencias_final, "preferencias_final.xlsx")
getwd()
rm(list=ls())
library(openxlsx)
tabla <- read.xlsx("/Users/IDECOR/Documents/Code/UNC/Eco Pol/Preferencia por candidatos (respuestas).xlsx")
names(tabla)
library(dplyr)
tabla <- rename(tabla, n = Marca.temporal,
STM = Sergio.Massa,
PB = Patricia.Bullrich,
HRL = Horacio.Rodriguez.Larreta,
JM = Javier.Milei,
JG = Juan.Grabois,
IntencionPASO = "¿Cuál.es.su.intención.de.voto.para.las.PASO?",
IntencionOtro = "En.caso.de.seleccionar.\"Otro\".¿A.quién.votaría?",
IntencionHRLgana = "Ante.el.eventual.escenario.que.Horacio.Rodríguez.Larreta.gane.la.interna.contra.Patricia.Bullrich,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
IntencionPBgana = "Ante.el.eventual.escenario.que.Patricia.Bullrich.gane.la.interna.contra.Horacio.Rodriguez.Larreta,.¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
STMvsHRL = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Horacio.Rodríguez.Larreta,.¿A.quién.votaría?",
STMvsPB = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Patricia.Bullrich,.¿A.quién.votaría?",
STMvsJM = "Ante.un.eventual.enfrentamiento.entre.Sergio.Massa.y.Javier.Milei,.¿A.quién.votaría?",
HRLvsJM = "Ante.un.eventual.enfrentamiento.entre.Horacio.Rodríguez.Larreta.y.Javier.Milei,.¿A.quién.votaría?",
PBvsJM = "Ante.un.eventual.enfrentamiento.entre.Patricia.Bullrich.y.Javier.Milei,.¿A.quién.votaría?"
)
names(tabla)
preferencias <- tabla[, 1:6]
names(preferencias)
head(preferencias)
indice <- 1:48
preferencias$n <- indice
head(preferencias)
library(tidyr)
ordenamientos <- c("Orden 1", "Orden 2", "Orden 3", "Orden 4", "Orden 5")
candidatos <- c("STM", "PB", "HRL", "JM", "JG")
preferencias[candidatos] <- candidatos[unlist(preferencias[candidatos])]
colnames(preferencias)[2:6] <- ordenamientos
preferencias_2 <- pivot_longer(preferencias, cols = starts_with("Orden"), names_to = "Orden", values_to = "Candidato")
preferencias_2$Candidato <- factor(preferencias_2$Candidato, levels = candidatos)
preferencias_final <- pivot_wider(preferencias_2, names_from = "Orden", values_from = "Candidato")
head(preferencias_final)
rm(list=ls())
webbrowser.open('https://youtu.be/H_vQt_v8Jmw')
system("iexplore.exe https://youtu.be/H_vQt_v8Jmw")
install.packages("rmarkdown")
library(knitr)
############################### ECO POL 2023 ##################################
rm(list=ls())
library(dplyr)
library(data.table)
directorio <- "/Users/IDECOR/Documents/Code/Political_Economy/datos_mesas/"
setwd(directorio)
getwd()
{
print("Importamos los datos")
datos <- fread(paste0(directorio, "votacion.csv"), sep = ",", dec = ".")
agrupaciones <- fread(paste0(directorio, "agrupacion.csv"), sep = ",", dec = ".")
listas <- fread(paste0(directorio, "lista.csv"), sep = ",", dec = ".")
mesas <-  fread(paste0(directorio, "mesa.csv"), sep = ",", dec = ".")
cargos <-  fread(paste0(directorio, "cargo.csv"), sep = ",", dec = ".")
tdv <-  fread(paste0(directorio, "tipovoto.csv"), sep = ",", dec = ".")
elecciontipo <-  fread(paste0(directorio, "eleccion.csv"), sep = ",", dec = ".")
circuito <- fread(paste0(directorio, "circuito.csv"), sep = ",", dec = ".")
provincias <- fread(paste0(directorio, "distrito.csv"), sep = ",", dec = ".")
seccion <- fread(paste0(directorio, "seccion.csv"), sep = ",", dec = ".")
seccion_prov <-fread(paste0(directorio, "seccionprovincial.csv"), sep = ",", dec = ".")
}
head(datos)
head(agrupaciones)
head(listas)
head(mesas)
cargos
tdv
elecciontipo
head(circuito)
table(provincias$nombre); names(provincias)
head(seccion)
head(seccion_prov)
# Sumamos nombres distritos
names(datos)
names(provincias)
datos_provincias <- left_join(datos, provincias, by = "distrito_id")
names(datos_provincias)
datos_provincias <- datos_provincias[, -c(12, 13)]
datos_provincias <- rename(datos_provincias, distrito_nombre = nombre)
head(datos_provincias); rm(datos); rm(provincias)
# Sumamos nombres cargos
cargos
table(datos_provincias$cargo_id)
datos_provincias$cargo_nombre <- case_when(datos_provincias$cargo_id == 1 ~ "Presidente",
datos_provincias$cargo_id == 2 ~ "Sen_Nac",
datos_provincias$cargo_id == 3 ~ "Dip_Nac",
datos_provincias$cargo_id == 4 ~ "Gobernador",
datos_provincias$cargo_id == 5 ~ "Sen_Prov",
datos_provincias$cargo_id == 6 ~ "Dip_Prov",
datos_provincias$cargo_id == 7 ~ "Intendente",
datos_provincias$cargo_id == 8 ~ "Mercosur_Nac",
datos_provincias$cargo_id == 9 ~ "Mercosur_Prov",
datos_provincias$cargo_id == 10 ~ "Concejales")
table(datos_provincias$cargo_nombre)
head(datos_provincias)
rm(cargos)
head(elecciontipo)
elecciontipo <- elecciontipo[, -c(2, 7)]; names(elecciontipo)
datos <- left_join(datos_provincias, elecciontipo, by = "eleccion_id")
head(datos)
names(datos); rm(datos_provincias, elecciontipo)
names(datos)
head(tdv)
datos2 <- left_join(datos, tdv, by = "tipovoto_id")
head(datos2); tdv
datos2 <- rename(datos2, tdv = nombre); names(datos2)
datos2 <- datos2[, -c(18)]
head(datos2)
datos <- datos2; rm(datos2, tdv); names(datos)
############################################################################
rm(circuito, listas, seccion, seccion_prov)
head(datos)
table(datos$cargo_nombre)
table(datos$eleccion_tipo)
View(datos)
head(datos$eleccion_tipo)
datos$eleccion_tipo == GENERAL
datos$eleccion_tipo == "GENERAL"
table(datos$eleccion_tipo)
datos$eleccion_tipo <- ifelse(datos$eleccion_tipo == "GENERAL", "GENERALES", datos$eleccion_tipo)
table(datos$eleccion_tipo)
table(datos$tdv)
table(datos$distrito_nombre)
getwd()
saveRDS(datos, "datos_sinagrup", compress = FALSE)
names(datos)
head(datos)
presidencial = datos  %>%
group_by(cargo_nombre == "Presidente")  %>%
summarise( distrito_nombre = distrito_nombre,
anio = anio,
eleccion_tipo = eleccion_tipo,
agrupacion_id = agrupacion_id,
votos = votos,
cargo_id = cargo_id,
mesa_id = mesa_id,
tdv = tdv)
presidencial = datos  %>%
group_by(cargo_nombre == "Presidente")  %>%
reframe( distrito_nombre = distrito_nombre,
anio = anio,
eleccion_tipo = eleccion_tipo,
agrupacion_id = agrupacion_id,
votos = votos,
cargo_id = cargo_id,
mesa_id = mesa_id,
tdv = tdv)
View(presidencial)
head(presidencial)
presidencial <- datos %>%
filter(cargo_nombre == "Presidente")
table(datos$eleccion_tipo)
table(datos$cargo_nombre)
gobernador <- datos %>%
filter(cargo_nombre == "Gobernador")
names(datos)
table(datos$eleccion_tipo)
PASO <- datos %>%
filter(eleccion_tipo == "PASO")
BALLOTAGE <- datos %>%
filter(eleccion_tipo == "BALLOTAGE")
GENERALES <- datos %>%
filter(eleccion_tipo == "GENERALES")
######################## FILTRAR POR AÑO ########################
table(datos$anio)
elecciones2011 <- datos %>%
filter(anio == "2011")
{
print("Filtramos elecciones por cargo")
presidencial <- datos %>%
filter(cargo_nombre == "Presidente")
gobernador <- datos %>%
filter(cargo_nombre == "Gobernador")
}
{
print("Filtramos elecciones por cargo")
presidencial <- datos %>%
filter(cargo_nombre == "Presidente")
gobernador <- datos %>%
filter(cargo_nombre == "Gobernador")
head(presidencial); head(gobernador)
}
{
print("Filtramos elecciones por tipo")
PASO <- datos %>%
filter(eleccion_tipo == "PASO")
GENERALES <- datos %>%
filter(eleccion_tipo == "GENERALES")
BALLOTAGE <- datos %>%
filter(eleccion_tipo == "BALLOTAGE")
}
nrow(PASO)
table(datos$anio)
{
print("Filtramos elecciones por año")
elecciones2011 <- datos %>%
filter(anio == "2011")
elecciones2013 <- datos %>%
filter(anio == "2013")
elecciones2015 <- datos %>%
filter(anio == "2015")
elecciones2017 <- datos %>%
filter(anio == "2017")
elecciones2019 <- datos %>%
filter(anio == "2019")
elecciones2021 <- datos %>%
filter(anio == "2021")
elecciones2023 <- datos %>%
filter(anio == "2023")
}
PASO2019 <- datos %>%
filter(eleccion_tipo == "PASO") %>%
filter(anio == "2019") %>%
filter(cargo_nombre == "Presidente")
head(PASO2019)
############################### ECO POL 2023 ##################################
rm(list=ls())
